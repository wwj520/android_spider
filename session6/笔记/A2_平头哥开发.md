## 平头哥安装
-  下载RatelManager_2.0-SNAPSHOT-release.apk 

     链接: https://pan.baidu.com/s/1h3wsVlzg7WbWYv250PUXXQ 提取码: u2ke
     
- 安装RatelManager

        adb install RatelManager_2.0-SNAPSHOT-release.apk

## 构建⼀个正常的app并采⽤平头哥框架进⾏感染的过程
#### 手机端感染
1. 切换到app目录下，⽣成签名密钥
    keytool -genkeypair -alias key0 -keyalg RSA -validity 400 -keystore demo.jks
2.  配置gradle⽂件, 设置签名密钥,在 build.gradle文件中
    ```javas
        android {
            signingConfigs {
                // 配置签名⽂件
                release {
                // 这⾥就是我们刚才⽤命令⽣成的密钥⽂件, 下⾯是⽣成密钥⽂件的时候需要配置的密码
                storeFile file("./demo.jks")
                storePassword "123456"
                keyAlias "key0"
                keyPassword "123456"
                }
            }
            buildTypes {
                release {
                // ... 其他的配置
                // 这⾥配置上⾯的签名⽂件, 这样的话, 只是配置了release包的签名
                signingConfig signingConfigs.release
                }
            }
    }
    
    ```
3.编译并直接安装⼀个release的app
   在界面右上角Gradle打开Tasks--other--assembleRelease右键Run
   输出：app--build--outputs--apk--release--app-release.apk
   安装到手机
4. 使⽤ RatelManager 来感染⼀个APP   

 **** 如果⾮要⽤debug的app可以怎么做****************
    需要在gradle.properties 中加一行配置
            android.injected.testOnly=false

   
#### PC端感染  ratel-engine
1. 下载感染引擎: 链接: https://pan.baidu.com/s/1h3wsVlzg7WbWYv250PUXXQ 提取码: u2ke
2. 使⽤说明
```text 
1.  WIN⾃⼰切换成为 ./ratel.bat
2. 运⾏脚本进⾏感染  ./retal.bat app的路径
3. 运⾏完成之后, 会得到⼀个 app_package_name_version_name_ratel.apk 这个就是感染好了的⽂件, 可
以直接安装到⼿机, 确保之前的app已经被卸载了, 否则可能会安装失败, 如果是debug下并且开启了
testOnly, 需要⽤ adb install -t xxx.apk 进⾏安
```
#### 【手动】开发⼀个平头哥插件的流程
1. 新建⼀个普通的Android项⽬
2. 添加相关依赖 在build.gradle(:app)中
```text

android {
// ...
packagingOptions {
exclude 'META-INF/INDEX.LIST'
exclude 'META-INF/io.netty.versions.properties'
}
}
dependencies {
// ... 其他的依赖
// ratel核⼼api
compileOnly 'com.virjar:ratel-api:1.3.6'
// ratel的扩展api，他⼀般是给逆向破解和爬⾍业务使⽤，如果您只是基于ratel做⼀个插件，那么⼤多数情况
api 'com.virjar:ratel-extersion:1.0.6'
// sekiro项⽬，他可以提供⻓链接RPC功能
api 'com.virjar:sekiro-api:1.0.3'
}

```

3.在Android清单⽂件 AndroidManifest.xml 添加如下内,  </activity>后面
```text
<meta-data android:name="xposedminversion" android:value="54"/>
<meta-data android:name="xposedmodule" android:value="true"/>
<meta-data android:name="xposeddescription" android:value="这个描述可以随便写, 会展示在插件列"/>
```
4 添加入口文件： ..\app\src\main
    右键main -- new - folder -- Assets Folder, 
    在 assets ⽂件下下⾯添加 xposed_init 文本文件夹, 内容为hook的⼊⼝类的完整路径, 如果有多个，分到多⾏去写
        eg: com.example.adp1.com.HookEntry;  //包名+自定义Hook类名
        
5 写自定义Hook类-demo
 
    ```text
        package com.example.myapplication;
        
        import android.util.Log;
        
        import com.virjar.ratel.api.rposed.IRposedHookLoadPackage;
        import com.virjar.ratel.api.rposed.callbacks.RC_LoadPackage;
        
        public class HookEntry implements IRposedHookLoadPackage {
            private static final String TAG="cuury";
        
            @Override
            public void handleLoadPackage(RC_LoadPackage.LoadPackageParam lpparam) throws Throwable {
                Log.d(TAG,"handleLoadPackage:"+lpparam.packageName);
            }
        }

    ```

#### 【自动】使⽤模板快速开发⼀个平头哥插件
1. 下载模板代码 https://github.com/virjarRatel/ratel-module-template
2. 在as运行
3. 执行命令 wind:  .\template.bat -p com.example.adp3(包名) -m crack-adp3（别名）
4. sync project  with gradle files （as右上角一个大象标志）等待完成
5. 安装到手机



    
        
    




























    